<head>
  <style>
    div { text-align: center; }
    button { text-align: center; }
  </style>
   <title>Comet Blessing</title>

</head>

<body>
  <main>
    <p> </p>
    <div><button onclick="postClick()">Click</button></div>
    <p> </p>
    <div id="scores"></div>
    <script>
    

function postClick() {
    fetch('/apps/click', {
        method: 'POST',
        body: 0
    })
    location.reload()
}

getState()
    .then((state) => renderPage(state))

async function getState() {
    const response = await fetch('/apps/click/state')
    return response.json()
}

const scores = document.getElementById("scores");

function renderPage(state)
{
  //if linked = 0
    //"you are curently blessing no one"
    //text field
    //"Bless a Comet" button

  //if linked = 1
    //"you are currently blessing " + linked
    //"Unbless"

  //"Interogate any comet using the button below."
  //"You'll receive its confession in your terminal app."
  //text field
  //Investigate button

  for(var i = 0; i < state.length; i++)
  {
      const newScore = document.createElement("div");
      newScore.textContent = "~" + state[i][0] + " " + state[i][1];
      scores.appendChild(newScore);
      console.log(newScore);
  }
}

</script>
</main>